import{r as i,u as f,c as e,j as o,f as C,w as L}from"./vendor.6b141815.js";import{u as R,h as k,L as S,I as $,R as E}from"./index.84b58e98.js";import{l as h,E as l}from"./index.69f15a28.js";const A=()=>{const[p,y]=i.exports.useState([]),[c,g]=i.exports.useState(),[r,I]=i.exports.useState(localStorage.getItem(h)||l.LIST),{state:{currentUser:s,myRegisters:x}}=R(),u=f(),d=i.exports.useCallback(async()=>{if(s!=null&&s.phone){const{courseList:t,totalNum:a}=await k(s==null?void 0:s.phone);y(t),g(a)}},[s==null?void 0:s.phone]);if(i.exports.useEffect(()=>{d()},[d]),!(s!=null&&s.phone))return u("/"),null;const v=t=>{const a=L(x,({courseId:b})=>b===t.courseId),n=a.status,N=`https://room.rustedu.com?username=${a.name}&userId=${s.phone}&role=${E[n]||"student"}&roomId=${t.roomId}&video=${t.ishd||"480"}p&title=${t.title}`;window.open(N)},m=r===l.GRID;return e("div",{className:"mycourse-list-wrapper",children:[e("header",{children:[o("div",{className:"title",children:"\u6211\u7684\u8BFE\u7A0B"}),e("div",{className:"totol-register-count",children:["\u5171\u62A5\u540D\u8BFE\u7A0B: ",o("strong",{children:c})]})]}),c===void 0?o(S,{}):e("div",{className:`mycourse-list ${m?"mycourse-list-layout-grid":"mycourse-list-layout-list"}`,children:[o("span",{className:"layout-icon",onClick:()=>{const t=m?l.LIST:l.GRID;I(t),localStorage.setItem(h,t)},children:o($,{symbol:r===l.GRID?"icon-listgrid":"icon-list"})}),C(p,(t,a)=>e("div",{className:"course-item",onClick:()=>u(`/${t.courseId}`),children:[o("img",{className:"course-item-cover",src:t.coverUrl,alt:"cover"}),e("div",{className:"course-item-content",children:[e("div",{children:[o("h3",{children:t.title}),o("div",{className:"summary",children:t.summary})]}),e("div",{className:"room",children:[e("span",{children:[" \u6559\u5BA4\u53F7: ",t.roomId," "]}),o("button",{className:"btn enter-class-btn",onClick:n=>{n.stopPropagation(),v(t)},children:"\u8FDB\u5165\u8BFE\u5802"})]})]})]},t.id+t.courseIndex+t.title+a))]})]})};export{A as default};
